{"version":3,"sources":["../../src/vro/configurations.js"],"names":["requestPromise","promisifyAll","require","module","exports","importOne","exportOne","categoryId","configurationPath","password","_this","resolve","reject","options","method","agent","config","url","hostname","headers","Buffer","username","toString","qs","formData","file","createReadStream","json","error","postAsync","then","response","catch","configurationId","encoding","getAsync"],"mappings":";;AAAA;;;;AACA;;;;;;AACA,IAAIA,iBAAiB,mBAAQC,YAAR,CAAqBC,QAAQ,SAAR,CAArB,CAArB;;AAEAC,OAAOC,OAAP,GAAiB;AACfC,aAAWA,SADI;AAEfC,aAAWA;AAFI,CAAjB;;AAKA,SAASA,SAAT,CAAoBC,UAApB,EAAgCC,iBAAhC,EAAmDC,QAAnD,EAA6D;AAC3D,MAAIC,QAAQ,IAAZ;;AAEA,SAAO,uBAAY,UAAUC,OAAV,EAAmBC,MAAnB,EAA2B;AAC5C,QAAIC,OAAJ;AACA,QAAI;AACFA,gBAAU;AACRC,gBAAQ,MADA;AAERC,eAAOL,MAAMM,MAAN,CAAaD,KAFZ;AAGRE,0BAAgBP,MAAMM,MAAN,CAAaE,QAA7B,6BAHQ;AAIRC,iBAAS;AACP,2BAAiB,UADV;AAEP,2BAAiB,WAAW,IAAIC,MAAJ,CAAWV,MAAMM,MAAN,CAAaK,QAAb,GAAwB,GAAxB,GAA8BZ,QAAzC,EAAmDa,QAAnD,CAA4D,QAA5D;AAFrB,SAJD;AAQRC,YAAI;AACFhB,sBAAYA;AADV,SARI;AAWRiB,kBAAU,EAACC,MAAM,aAAGC,gBAAH,CAAoBlB,iBAApB,CAAP,EAXF;AAYRmB,cAAM;AAZE,OAAV;AAcD,KAfD,CAeE,OAAOC,KAAP,EAAc;AACd,aAAOhB,OAAOgB,KAAP,CAAP;AACD;;AAED5B,mBAAe6B,SAAf,CAAyBhB,OAAzB,EACGiB,IADH,CACQ,UAAUC,QAAV,EAAoB;AACxB,aAAOpB,QAAQoB,QAAR,CAAP;AACD,KAHH,EAIGC,KAJH,CAIS,UAAUJ,KAAV,EAAiB;AACtBhB,aAAOgB,KAAP;AACD,KANH;AAOD,GA5BM,CAAP;AA6BD;;AAED,SAASvB,SAAT,CAAoB4B,eAApB,EAAqCxB,QAArC,EAA+C;AAC7C,MAAIC,QAAQ,IAAZ;;AAEA,SAAO,uBAAY,UAAUC,OAAV,EAAmBC,MAAnB,EAA2B;AAC5C,QAAIC,OAAJ;;AAEAA,cAAU;AACRC,cAAQ,KADA;AAERC,aAAOL,MAAMM,MAAN,CAAaD,KAFZ;AAGRE,wBAAgBP,MAAMM,MAAN,CAAaE,QAA7B,gCAAgEe,eAHxD;AAIRd,eAAS;AACP,yBAAiB,UADV;AAEP,yBAAiB,WAAW,IAAIC,MAAJ,CAAWV,MAAMM,MAAN,CAAaK,QAAb,GAAwB,GAAxB,GAA8BZ,QAAzC,EAAmDa,QAAnD,CAA4D,QAA5D,CAFrB;AAGP,kBAAU;AAHH,OAJD;AASRY,gBAAU;AATF,KAAV;;AAYAlC,mBAAemC,QAAf,CAAwBtB,OAAxB,EACGiB,IADH,CACQ,UAAUC,QAAV,EAAoB;AACxB,aAAOpB,QAAQoB,QAAR,CAAP;AACD,KAHH,EAIGC,KAJH,CAIS,UAAUJ,KAAV,EAAiB;AACtBhB,aAAOgB,KAAP;AACD,KANH;AAOD,GAtBM,CAAP;AAuBD","file":"configurations.js","sourcesContent":["import fs from 'fs'\nimport Promise from 'bluebird'\nvar requestPromise = Promise.promisifyAll(require('request'))\n\nmodule.exports = {\n  importOne: importOne,\n  exportOne: exportOne\n}\n\nfunction exportOne (categoryId, configurationPath, password) {\n  var _this = this\n\n  return new Promise(function (resolve, reject) {\n    var options\n    try {\n      options = {\n        method: 'POST',\n        agent: _this.config.agent,\n        url: `https://${_this.config.hostname}/vco/api/configurations/`,\n        headers: {\n          'cache-control': 'no-cache',\n          'authorization': 'Basic ' + new Buffer(_this.config.username + ':' + password).toString('base64')\n        },\n        qs: {\n          categoryId: categoryId\n        },\n        formData: {file: fs.createReadStream(configurationPath)},\n        json: true\n      }\n    } catch (error) {\n      return reject(error)\n    }\n\n    requestPromise.postAsync(options)\n      .then(function (response) {\n        return resolve(response)\n      })\n      .catch(function (error) {\n        reject(error)\n      })\n  })\n}\n\nfunction importOne (configurationId, password) {\n  var _this = this\n\n  return new Promise(function (resolve, reject) {\n    var options\n\n    options = {\n      method: 'GET',\n      agent: _this.config.agent,\n      url: `https://${_this.config.hostname}/vco/api/configurations/${configurationId}`,\n      headers: {\n        'cache-control': 'no-cache',\n        'authorization': 'Basic ' + new Buffer(_this.config.username + ':' + password).toString('base64'),\n        'accept': 'application/vcoobject+xml'\n      },\n      encoding: 'utf-8'\n    }\n\n    requestPromise.getAsync(options)\n      .then(function (response) {\n        return resolve(response)\n      })\n      .catch(function (error) {\n        reject(error)\n      })\n  })\n}\n"]}