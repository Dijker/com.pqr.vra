{"version":3,"sources":["../../src/vra/advancedDesigner.js"],"names":["requestPromise","promisifyAll","require","module","exports","getAllSubscriptions","getSubscriptionById","createSubscription","deleteSubscription","_this","resolve","reject","options","tenantId","config","tenant","method","agent","url","hostname","headers","token","json","getAsync","then","response","catch","error","id","subscriptionJson","body","postAsync","deleteAsync"],"mappings":"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","file":"advancedDesigner.js","sourcesContent":["import Promise from 'bluebird'\nvar requestPromise = Promise.promisifyAll(require('request'))\n\nmodule.exports = {\n  getAllSubscriptions: getAllSubscriptions,\n  getSubscriptionById: getSubscriptionById,\n  createSubscription: createSubscription,\n  deleteSubscription: deleteSubscription\n}\n\nfunction getAllSubscriptions () {\n  var _this = this\n\n  return new Promise(function (resolve, reject) {\n    var options\n    var tenantId = _this.config.tenant\n\n    options = {\n      method: 'GET',\n      agent: _this.config.agent,\n      url: `https://${_this.config.hostname}/advanced-designer-service/api/tenants/${tenantId}/event-broker/subscriptions?limit=1000`,\n      headers: {\n        'cache-control': 'no-cache',\n        'authorization': `Bearer ${_this.config.token}`\n      },\n      json: true\n    }\n\n    requestPromise.getAsync(options)\n      .then(function (response) {\n        return resolve(response)\n      })\n      .catch(function (error) {\n        reject(error)\n      })\n  })\n}\n\nfunction getSubscriptionById (id) {\n  var _this = this\n  var tenantId = _this.config.tenant\n  return new Promise(function (resolve, reject) {\n    var options\n    options = {\n      method: 'GET',\n      agent: _this.config.agent,\n      url: `https://${_this.config.hostname}/advanced-designer-service/api/tenants/${tenantId}/event-broker/subscriptions/${id}`,\n      headers: {\n        'cache-control': 'no-cache',\n        'authorization': `Bearer ${_this.config.token}`\n      },\n      json: true\n    }\n\n    requestPromise.getAsync(options)\n      .then(function (response) {\n        return resolve(response)\n      })\n      .catch(function (error) {\n        reject(error)\n      })\n  })\n}\n\nfunction createSubscription (subscriptionJson) {\n  var _this = this\n  var tenantId = _this.config.tenant\n\n  return new Promise(function (resolve, reject) {\n    var options\n    options = {\n      method: 'POST',\n      agent: _this.config.agent,\n      url: `https://${_this.config.hostname}/advanced-designer-service/api/tenants/${tenantId}/event-broker/subscriptions/`,\n      headers: {\n        'cache-control': 'no-cache',\n        'authorization': `Bearer ${_this.config.token}`\n      },\n      body: subscriptionJson,\n      json: true\n    }\n\n    requestPromise.postAsync(options)\n      .then(function (response) {\n        return resolve(response)\n      })\n      .catch(function (error) {\n        reject(error)\n      })\n  })\n}\n\nfunction deleteSubscription (id) {\n  var _this = this\n  var tenantId = _this.config.tenant\n\n  return new Promise(function (resolve, reject) {\n    var options\n    options = {\n      method: 'DELETE',\n      agent: _this.config.agent,\n      url: `https://${_this.config.hostname}/advanced-designer-service/api/tenants/${tenantId}/event-broker/subscriptions/${id}`,\n      headers: {\n        'cache-control': 'no-cache',\n        'authorization': `Bearer ${_this.config.token}`\n      },\n      json: true\n    }\n\n    requestPromise.deleteAsync(options)\n      .then(function (response) {\n        return resolve(response)\n      })\n      .catch(function (error) {\n        reject(error)\n      })\n  })\n}\n"]}