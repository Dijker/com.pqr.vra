{"version":3,"sources":["../../src/vro/resources.js"],"names":["requestPromise","promisifyAll","require","module","exports","exportOne","categoryId","resourcePath","password","_this","resolve","reject","options","method","agent","config","url","hostname","headers","Buffer","username","toString","qs","formData","file","createReadStream","json","error","postAsync","then","response","catch"],"mappings":";;AAAA;;;;AACA;;;;;;AACA,IAAIA,iBAAiB,mBAAQC,YAAR,CAAqBC,QAAQ,SAAR,CAArB,CAArB;;AAEAC,OAAOC,OAAP,GAAiB;AACfC,aAAWA;AADI,CAAjB;;AAIA,SAASA,SAAT,CAAoBC,UAApB,EAAgCC,YAAhC,EAA8CC,QAA9C,EAAwD;AACtD,MAAIC,QAAQ,IAAZ;AACA,SAAO,uBAAY,UAAUC,OAAV,EAAmBC,MAAnB,EAA2B;AAC5C,QAAIC,OAAJ;AACA,QAAI;AACFA,gBAAU;AACRC,gBAAQ,MADA;AAERC,eAAOL,MAAMM,MAAN,CAAaD,KAFZ;AAGRE,0BAAgBP,MAAMM,MAAN,CAAaE,QAA7B,wBAHQ;AAIRC,iBAAS;AACP,2BAAiB,UADV;AAEP,2BAAiB,WAAW,IAAIC,MAAJ,CAAWV,MAAMM,MAAN,CAAaK,QAAb,GAAwB,GAAxB,GAA8BZ,QAAzC,EAAmDa,QAAnD,CAA4D,QAA5D;AAFrB,SAJD;AAQRC,YAAI;AACFhB,sBAAYA;AADV,SARI;AAWRiB,kBAAU,EAACC,MAAM,aAAGC,gBAAH,CAAoBlB,YAApB,CAAP,EAXF;AAYRmB,cAAM;AAZE,OAAV;AAcD,KAfD,CAeE,OAAOC,KAAP,EAAc;AACd,aAAOhB,OAAOgB,KAAP,CAAP;AACD;;AAED3B,mBAAe4B,SAAf,CAAyBhB,OAAzB,EACGiB,IADH,CACQ,UAAUC,QAAV,EAAoB;AACxB,aAAOpB,QAAQoB,QAAR,CAAP;AACD,KAHH,EAIGC,KAJH,CAIS,UAAUJ,KAAV,EAAiB;AACtBhB,aAAOgB,KAAP;AACD,KANH;AAOD,GA5BM,CAAP;AA6BD","file":"resources.js","sourcesContent":["import fs from 'fs'\nimport Promise from 'bluebird'\nvar requestPromise = Promise.promisifyAll(require('request'))\n\nmodule.exports = {\n  exportOne: exportOne\n}\n\nfunction exportOne (categoryId, resourcePath, password) {\n  var _this = this\n  return new Promise(function (resolve, reject) {\n    var options\n    try {\n      options = {\n        method: 'POST',\n        agent: _this.config.agent,\n        url: `https://${_this.config.hostname}/vco/api/resources/`,\n        headers: {\n          'cache-control': 'no-cache',\n          'authorization': 'Basic ' + new Buffer(_this.config.username + ':' + password).toString('base64')\n        },\n        qs: {\n          categoryId: categoryId\n        },\n        formData: {file: fs.createReadStream(resourcePath)},\n        json: true\n      }\n    } catch (error) {\n      return reject(error)\n    }\n\n    requestPromise.postAsync(options)\n      .then(function (response) {\n        return resolve(response)\n      })\n      .catch(function (error) {\n        reject(error)\n      })\n  })\n}\n"]}